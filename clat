#!/bin/bash

help='Usage: \e[1mclat\e[0m [ -h | \e[4mfile\e[0m ]
Compiles an tex file multiple times, so bib and pdf is right.
'

if [[ $1 = -h ]]; then
  printf "$help"
  exit 0
elif [[ -n $1 ]]; then
 if [[ ! -r "$1" ]]; then
  echo "Please give an existing and readable file."
  exit 1
 fi
 for file in $@; do
   echo "$file:"
   latex -interaction=batchmode "$file"
   bibtex "${file:0:$((${#file}-3))}aux"
   latex -interaction=batchmode "$file"
   latex -interaction=batchmode "$file"
   pdflatex -interaction=batchmode "$file"
 done
else
 printf "Please give a file.\n$help"
 exit 1
fi
